<?php



function course_info_install() {

    /*
     * Department
     */

    $department = array(
      'type' => 'department',
      'name' => $t('Department'),
      'base' => 'department',
      'description' => $t('This is a department within a college.'),
    );
    $content_type = node_type_set_defaults($department);
    node_add_body_field($content_type);
// Check if we create content type or update.
    $status = node_type_save($content_type);
// Replacement rule for the messages.
    $t_args = array('%name' => $content_type->name);
    if ($status == SAVED_UPDATED) { // update case
        drupal_set_message($t('The content type %name has been updated.', $t_args));
    }
    elseif ($status == SAVED_NEW) { // create case
        drupal_set_message($t('The content type %name has been added.', $t_args));
        watchdog('node', 'Added content type %name.', $t_args, WATCHDOG_NOTICE, l($t('view'), 'admin/structure/types'));
    }

    /*
     * Subject
     */

    /*
     * Course
     */

    /*
     * Section
     */

    /*
     * Instructor
     */

    /*
     * Meeting Times - widget?
     */



}

function course_info_uninstall() {

}

/**
 * @return mixed
 */
function course_info_schema() {
    $schema['courses_info_url'] = array(
        'description' => t('The base table for URL pointing to UNM Course info XML.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for courses url.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE
            ),
            'url' => array(
                'description' => t('URL to grab UNM courses data file from.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'updated' => array(
                'description' => t('UNIX timestamp of last update.'),
                'type' => 'int',
                'not null' => FALSE
            )
        ),
        'primary key' => array('id'),
    );

    $schema['courses_info_departments'] = array(
        'description' => t('The base table containing each department in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for departments.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'code' => array(
                'description' => t('UNM department code according to UNM records.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'name' => array(
                'description' => t('Longhand department name according to UNM records.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),

        ),
        'primary key' => array('id'),
    );
    $schema['courses_info_subjects'] = array(
        'description' => t('The base table containing subjects included in each department in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for subjects.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'code' => array(
                'description' => t('Shorthand subject code according to UNM records.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'name' => array(
                'description' => t('Longhand subject name according to UNM records.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'department_id' => array(
                'description' => t('Foreign key pointing to department to which this subject belongs.'),
                'type' => 'int',
                'not null' => TRUE,

            ),

        ),
        'primary key' => array('id'),
        // Foreign keys are apparently only for documentation in Drupal
        'foreign keys' => array(
            'department_id' => array(
                'table' => 'courses_info_departments',
                'columns' => array('id' => 'department_id')
            ),
        ),
    );

    $schema['courses_info_courses'] = array(
        'description' => t('The base table containing courses included in each subject in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for courses.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'number' => array(
                'description' => t('Shorthand numerical-string code for this course according to UNM records'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'title' => array(
                'description' => t('Longhand course title according to UNM records.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => ''
            ),
            'course_description' => array(
                'description' => t('Full catalog description of this course according to UNM records.'),
                'type' => 'text',
                'not null' => FALSE,
            ),
            'subject_id' => array(
                'description' => t('Foreign key pointing to subject to which this course belongs.'),
                'type' => 'int',
                'not null' => TRUE,

            ),

        ),
        'primary key' => array('id'),
        // Foreign keys are apparently only for documentation in Drupal
        'foreign keys' => array(
            'subject_id' => array(
                'table' => 'courses_info_subjects',
                'columns' => array('id' => 'subject_id')
            ),
        ),
    );

    $schema['courses_info_sections'] = array(
        'description' => t('The base table containing available sections for each course in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for sections.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'crn' => array(
                'description' => t('Numerical identifier for this section according to UNM records.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => '',
            ),
            'number' => array(
                'description' => t('Friendly section number for this section i.e. 001, 002, etc.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => '',
            ),
            'part_of_term' => array(
                'description' => t('Numerical representation of the part of term in which this section takes place.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',

            ),
            'status' => array(
                'description' => t('Active status code for this section A = active, C = cancelled, etc.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => '',
            ),
            'section-title' => array(
                'description' => t('If this section has its own title, this is it.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'section-text' => array(
                'description' => t('Any text specific to this section that needs to be conveyed.'),
                'type' => 'text',
                'not null' => FALSE,
            ),
            'instructional-method-code' => array(
                'description' => t('Code for instruction method used.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'instructional-method' => array(
                'description' => t('Text description of instructional method'),
                'type' => 'text',
                'not null' => FALSE,
            ),
            'delivery-type-code' => array(
                'description' => t('Code for delivery type used.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'delivery-type' => array(
                'description' => t('Text description of delivery type'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'enrollment-max' => array(
                'description' => t('Numerical value representing max capacity for this section.'),
                'type' => 'int',
                'not null' => FALSE,
            ),
            'enrollment' => array(
                'description' => t('Current enrollment value in integer.'),
                'type' => 'int',
                'not null' => FALSE,
            ),
            'waitlist-max' => array(
                'description' => t('Numerical value representing max capacity for this section\'s wait list.'),
                'type' => 'int',
                'not null' => FALSE,
            ),
            'waitlist' => array(
                'description' => t('Current waitlist queue.'),
                'type' => 'int',
                'not null' => FALSE,
            ),
            'credits' => array(
                'description' => t('Credits granted.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'fees' => array(
                'description' => t('Fees required for this course.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'course_id' => array(
                'description' => t('Foreign key pointing to course to which this section belongs.'),
                'type' => 'int',
                'not null' => TRUE,
            ),

        ),
        'primary key' => array('id'),
        // Foreign keys are apparently only for documentation in Drupal
        'foreign keys' => array(
            'course_id' => array(
                'table' => 'courses_info_courses',
                'columns' => array('id' => 'course_id')
            ),
        ),
    );

    $schema['courses_info_instructors'] = array(
        'description' => t('The base table containing all instructors in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for instructors.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'first' => array(
                'description' => t('Instructor first name.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => '',
            ),
            'last' => array(
                'description' => t('Instructor last name.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => TRUE,
                'default' => '',
            ),
            'middle_initial' => array(
                'description' => t('Instructor middle initial.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'email' => array(
                'description' => t('Instructor\ email address.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),

        ),
        'primary key' => array('id'),
    );

    $schema['courses_info_sections_instructors'] = array(
        'description' => t('The base table containing instructor section pairs for each course in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for section-instructors.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'section_id' => array(
                'description' => t('Foreign key pointing to section of this section instructors pair.'),
                'type' => 'int',
                'not null' => TRUE,
            ),
            'instructor_id' => array(
                'description' => t('Foreign key pointing to instructor of this section instructors pair.'),
                'type' => 'int',
                'not null' => TRUE,
            ),
            'primary_instructor' => array(
                'description' => t('Flag to determine if this instructor is the primary instructor for this section.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
        ),
        'primary key' => array('id'),
        // Foreign keys are apparently only for documentation in Drupal
        'foreign keys' => array(
            'section_id' => array(
                'table' => 'courses_info_sections',
                'columns' => array('id' => 'section_id')
            ),
            'instructor_id' => array(
                'table' => 'courses_info_instructors',
                'columns' => array('id' => 'instructor_id')
            ),
        ),
    );

    $schema['courses_info_meeting_times'] = array(
        'description' => t('The base table containing meeting times for each section in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for the meeting time column .'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'start-date' => array(
                'description' => t('Date of the first day of class.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'end-date' => array(
                'description' => t('Date of the last day of class.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'days' => array(
                'description' => t('Days of the week this class takes place.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'start-time' => array(
                'description' => t('Time class begins.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'end-time' => array(
                'description' => t('Time class ends.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
            'bldg-code' => array(
                'description' => t('Shorthand code for building this class takes place in.'),
                'type' => 'varchar',
                'length' => 255,
                'not null' => FALSE,
                'default' => '',
            ),
        ),
        'primary key' => array('id'),
    );

    $schema['courses_info_sections_meeting_times'] = array(
        'description' => t('The base table containing meeting time - section pairs for each course in OILS.'),
        'fields' => array(
            'id' => array(
                'description' => t('The primary identifier for section-meet-time.'),
                'type' => 'serial',
                'unsigned' => TRUE,
                'not null' => TRUE,
            ),
            'section_id' => array(
                'description' => t('Foreign key pointing to section of this section instructors pair.'),
                'type' => 'int',
                'not null' => TRUE,
            ),
            'meeting_time_id' => array(
                'description' => t('Foreign key pointing to meetingn time of this section meeting time pair.'),
                'type' => 'int',
                'not null' => TRUE,
            ),
        ),
        'primary key' => array('id'),
        // Foreign keys are apparently only for documentation in Drupal
        'foreign keys' => array(
            'section_id' => array(
                'table' => 'courses_info_sections',
                'columns' => array('id' => 'section_id')
            ),
            'meeting_time_id' => array(
                'table' => 'courses_info_meeting_times',
                'columns' => array('id' => 'meeting_time_id')
            ),
        ),
    );

    return $schema;
}
*/